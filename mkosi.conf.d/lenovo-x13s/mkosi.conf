[Match]
Architecture=arm64

[Content]
Devicetrees=
    qcom/sc8280xp-lenovo-thinkpad-x13s.dtb
KernelCommandLine=
# tpm is not supported on lenovo-x13s
        rd.systemd.mask=dev-tpm0.device
        systemd.mask=dev-tpm0.service
        rd.systemd.mask=dev-tpmrm0.device
        systemd.mask=dev-tpmrm0.device
        rd.systemd.mask=tpm2.target
        systemd.mask=tpm2.target
        systemd.mask=systemd-pcrlock-firmware-code.service
        systemd.mask=systemd-pcrlock-firmware-config.service
        systemd.mask=systemd-pcrlock-make-policy.service
# support for this platform is not perfect, disable what we *know* does not work
        arm64.nopauth clk_ignore_unused pd_ignore_unused
Packages=
# firmware for lenovo-x31s
        firmware-qcom-soc
        firmware-atheros
# add basic qualcomm tools
        protection-domain-mapper
        qrtr-tools
# not sure why this is needed
        acpi
# make sound work
        alsa-topology-conf
        alsa-ucm-conf
FirmwareFiles=
        qcom/sc8280xp/LENOVO/21BX/qcadsp8280.mbn
        qcom/sc8280xp/LENOVO/21BX/qccdsp8280.mbn
        qcom/sc8280xp/LENOVO/21BX/qcdxkmsuc8280.mbn
        qcom/sc8280xp/LENOVO/21BX/qcslpi8280.mbn
        qcom/a660_sqe.fw
        qcom/a660_gmu.bin
KernelInitrdModules=
# Ensure that modules needed for boot are present
        /drivers/phy/qualcomm/phy-qcom-qmp-pcie
# Ensure that modules needed for display output are present
        /drivers/clk/qcom/gpucc-sc8280xp
        /drivers/gpu/drm/panel/panel-edp
        /drivers/hid/i2c-hid/i2c-hid-of
        /drivers/i2c/busses/i2c-qcom-geni
# llm generated list here
        /arch/arm64/crypto/aes-neon-bs
        /crypto/algif_hash
        /drivers/gpu/drm/clients/drm_client_lib
        /drivers/hwspinlock/qcom_hwspinlock
        /drivers/input/evdev
        /drivers/interconnect/qcom/qnoc-sc8280xp
        /drivers/mailbox/qcom-ipcc
        /drivers/mfd/qcom-spmi-pmic
        /drivers/regulator/fixed
        /drivers/regulator/qcom-rpmh-regulator
        /drivers/rpmsg/qcom_smd
        /drivers/soc/qcom/pmic_glink
        /drivers/soundwire/soundwire-bus
        /drivers/soundwire/soundwire-qcom
        /drivers/usb/common/ulpi
        /drivers/usb/host/xhci-hcd
        /drivers/usb/host/xhci-plat-hcd
        /fs/btrfs/btrfs
        /fs/efivarfs/efivarfs
        /fs/erofs/erofs
        /fs/fat/fat
        /fs/fat/vfat
        /fs/nls/nls_cp437
        /lib/crc/crc16
        /lib/crypto/gf128mul
        /lib/crypto/libarc4
        /lib/lz4/lz4_compress
        /lib/reed_solomon/reed_solomon
        /net/qrtr/qrtr-mhi
